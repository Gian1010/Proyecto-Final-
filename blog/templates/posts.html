{% extends 'base.html' %}

{% block contenido %}

<div class="container" style="margin-top: 50px;">
    <input type="text" id="search" class="form-control mb-4" placeholder="Buscar posts...">
    
    {% for i in posts %}
        <div class="card mb-4 post">
            <div class="card-header">
                <h2>{{ i.titulo }}</h2>
                <h5 class="text-muted">{{ i.subtitulo }}</h5>
            </div>
            <div class="card-body">
                <p><strong>Categor√≠a:</strong> {{ i.categoria }}</p>
                <p>{{ i.texto }}</p>
                {% if i.imagen %}
                    <img src="{{ i.imagen.url }}" class="img-fluid" alt="{{ i.titulo }}">
                {% endif %}
            </div>
        </div>
    {% empty %}
        <p class="text-center">No hay posts</p>
    {% endfor %}
</div>

<div class="container text-center" style="margin-top: 20px;">
    <h1></h1>
</div>

<script>
    document.getElementById('search').addEventListener('input', function() {
        const query = this.value.toLowerCase();
        const posts = document.querySelectorAll('.post');
        posts.forEach(post => {
            const title = post.querySelector('h2').textContent.toLowerCase();
            const subtitle = post.querySelector('h5').textContent.toLowerCase();
            const category = post.querySelector('p strong').nextSibling.textContent.toLowerCase();
            const text = post.querySelector('p').textContent.toLowerCase();
            if (title.includes(query) || subtitle.includes(query) || category.includes(query) || text.includes(query)) {
                post.style.display = '';
            } else {
                post.style.display = 'none';
            }
        });
    });
</script>

{% endblock %}